---
title: Rodando seu contrato
submissionDescription: Envie um print de como ficou o seu terminal depois de ter rodado o script 'npx hardhat run scripts/run.js'
submissionContent: Image
---

## Como simular um ambiente blockchain na sua mÃ¡quina?

O Hardhat facilita essa etapa, com ele vocÃª vai conseguir rodar uma blockchain localmente e testar seus contratos inteligentes antes mesmo de subir para um ambiente real (de produÃ§Ã£o).

Gerando uma reduÃ§Ã£o na quantidade de erros e te permitindo conferir se todo o fluxo de dados estÃ¡ correto.

VocÃª precisa compilar seu contrato inteligente, o que significa transformar o arquivo `XPost.sol` em um arquivo compilado pronto para testar nas blockchains.

Com um comando do Hardhat vocÃª subirÃ¡ uma blockchain local e testarÃ¡ esse contrato compilado... Vamos comeÃ§ar?

## Escrevendo um script com Hardhat para testar seu contrato

Primeiro vocÃª deve criar um arquivo chamado `run.js` dentro da pasta `scripts`.

Nesse arquivo `run.js` vocÃª definirÃ¡ as instruÃ§Ãµes com o Hardhat para subir um ambiente blockchain e rodar o contrato inteligente que vocÃª escreveu na aula anterior com o seguinte cÃ³digo:

```js
const main = async () => {
  const xPost = await hre.ethers.deployContract("XPost");
  await xPost.waitForDeployment();
  console.log("Deploy do contrato no endereÃ§o:", xPost.target);
};

const runMain = async () => {
  try {
    await main();
    process.exit(0);
  } catch (error) {
    console.log(error);
    process.exit(1);
  }
};

runMain();
```

Por Ãºltimo, vocÃª vai rodar o seguinte script no terminal `npx hardhat run scripts/run.js` para executar o cÃ³digo acima e deverÃ¡ aparecer essas mensagens no seu terminal:

![](https://raw.githubusercontent.com/menthorlabs/courses/main/images/2023-08-27-13-25-50.png)

## Como esse cÃ³digo funciona? ğŸ¤”

Quando vocÃª roda o comando `npx hardhat run` ele jÃ¡ prepara todo o ambiente blockchain por debaixo dos panos antes de comeÃ§ar a rodar o cÃ³digo.

O restante Ã© bem direto ao ponto, o cÃ³digo `const xPost = await hre.ethers.deployContract("XPost");` indica que vocÃª quer fazer o deploy (implementaÃ§Ã£o) do contrato chamado XPost (aquele arquivo `XPost.sol` que vocÃª criou anteriormente).

JÃ¡ na parte `await xPost.waitForDeployment();`, vocÃª estÃ¡ mandando esperar o deploy do contrato inteligente ser finalizado. VocÃª consegue ver no terminal escrito `Eu serei o contrato inteligente para fazer um post no Twitter descentralizado.` que Ã© justamente o console.log que vocÃª colocou no arquivo `XPost.sol`.

Depois disso, estamos apenas conferindo o endereÃ§o de deploy do contrato com o cÃ³digo `console.log("Deploy do contrato no endereÃ§o:", xPost.target);`.

## HRE e Hardhat ğŸ©

VocÃª vai perceber que em vÃ¡rias partes do nosso cÃ³digo nÃ³s usaremos a funÃ§Ã£o `hre` que nÃ£o importamos em lugar algum. 

Na verdade essa funÃ§Ã£o Ã© importada automaticamente quando usabamos o comando `npx hardhat` para rodar os scripts. Caso prefira, vocÃª pode rodar os scripts usando Node.js, porÃ©m terÃ¡ que importar todas as dependÃªncias manualmente.

Descubra mais como o HRE funciona [aqui nessa documentaÃ§Ã£o](https://hardhat.org/hardhat-runner/docs/advanced/hardhat-runtime-environment?utm_source=menthor.io).

